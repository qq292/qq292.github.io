<div class="markdown-body editormd-preview-container" previewcontainer="true" style="padding: 20px;"><pre class="prettyprint linenums prettyprinted" style=""><ol class="linenums"><li class="L0"><code class="lang-lua"></code></li><li class="L1"><code class="lang-lua"><span class="pun">结束游戏=</span><span class="lit">0</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">w</span><span class="pun">,</span><span class="pln"> h </span><span class="pun">=</span><span class="pln"> getScreenSize</span><span class="pun">()</span></code></li><li class="L3"><code class="lang-lua"><span class="pun">下棋颜色=</span><span class="lit">1</span><span class="pln"> </span><span class="pun">--黑子先下</span></code></li><li class="L4"><code class="lang-lua"><span class="pun">下子提示=</span><span class="lit">0</span></code></li><li class="L5"><code class="lang-lua"><span class="pun">黑棋=</span><span class="str">"000000"</span></code></li><li class="L6"><code class="lang-lua"><span class="pun">白棋=</span><span class="str">"FFFFFF"</span></code></li><li class="L7"><code class="lang-lua"><span class="pun">棋盘格子大小=</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.8</span><span class="pun">/</span><span class="lit">8</span></code></li><li class="L8"><code class="lang-lua"><span class="pun">棋盘格子间距=</span><span class="lit">1</span></code></li><li class="L9"><code class="lang-lua"><span class="pun">棋盘底色=</span><span class="pln"> </span><span class="str">"0F6600"</span></code></li><li class="L0"><code class="lang-lua"><span class="pun">棋子大小=</span><span class="lit">26</span></code></li><li class="L1"><code class="lang-lua"><span class="pun">可落子区域={}</span></code></li><li class="L2"><code class="lang-lua"><span class="pun">翻转区域={}</span></code></li><li class="L3"><code class="lang-lua"><span class="pun">检测方向={</span><span class="str">"上"</span><span class="pun">,</span><span class="str">"下"</span><span class="pun">,</span><span class="str">"左"</span><span class="pun">,</span><span class="str">"右"</span><span class="pun">,</span><span class="str">"上左"</span><span class="pun">,</span><span class="str">"上右"</span><span class="pun">,</span><span class="str">"下左"</span><span class="pun">,</span><span class="str">"下右"</span><span class="pun">}</span></code></li><li class="L4"><code class="lang-lua"><span class="pun">黑子数量=</span><span class="lit">0</span></code></li><li class="L5"><code class="lang-lua"><span class="pun">白子数量=</span><span class="lit">0</span></code></li><li class="L6"><code class="lang-lua"><span class="pun">对手=</span><span class="lit">1</span><span class="pln"> </span><span class="pun">--</span><span class="lit">0</span><span class="pun">：玩家</span><span class="pln">   </span><span class="lit">1</span><span class="pun">：</span><span class="pln">AI</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">fwShowWnd</span><span class="pun">(</span><span class="str">"wid"</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.1</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.2</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.9</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.8</span><span class="pun">,</span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">fwShowWnd</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.1</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.15</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.9</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.2</span><span class="pun">,</span><span class="lit">0</span><span class="pun">)</span></code></li><li class="L9"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">游戏初始化()</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="pun">下棋颜色=</span><span class="lit">1</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">    </span><span class="pun">棋盘={</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="pun">{</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">},</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">    </span><span class="pun">渲染棋盘()</span></code></li><li class="L2"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">测试可落子区域()</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    </span><span class="pun">翻转区域={}</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">    </span><span class="pun">可落子区域={}</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">    </span><span class="pun">黑子数量=</span><span class="lit">0</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">    </span><span class="pun">白子数量=</span><span class="lit">0</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> var2</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                </span><span class="pun">黑子数量=黑子数量+</span><span class="lit">1</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="pun">白子数量=白子数量+</span><span class="lit">1</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">下棋颜色</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                </span><span class="pun">--上测试</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">垂直坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="kwd">var</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">1</span><span class="pun">,-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从下往上测试</span><span class="pln">           </span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">&gt;</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="pln">t</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">})</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2 </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"上"</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="pun">--下测试</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&lt;=</span><span class="lit">6</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">垂直坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="kwd">var</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从上往下测试</span><span class="pln">       </span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">&lt;=</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="pln">t</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">})</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="lit">3</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2 </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"下"</span><span class="pln">                                </span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span><span class="pln">    </span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="pln">                </span><span class="pun">--左测试</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> var2</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">水平坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="pln">var2</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="lit">2</span><span class="pun">,-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从右往左测试</span><span class="pln">           </span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">左边一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="kwd">var</span><span class="pun">,</span><span class="pln">t</span><span class="pun">})</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="kwd">var</span><span class="pun">,</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="kwd">var</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> t</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"左"</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L5"><code class="lang-lua"></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="pln">                </span><span class="pun">--右测试</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> var2</span><span class="pun">&lt;=</span><span class="lit">6</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">水平坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="pln">var2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="lit">7</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从左往右测试</span><span class="pln">           </span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">右边一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="kwd">var</span><span class="pun">,</span><span class="pln">t</span><span class="pun">})</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">   </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="kwd">var</span><span class="pun">,</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="kwd">var</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> t</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"右"</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L5"><code class="lang-lua"></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="pln">                </span><span class="pun">--上左测试</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> var2</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上左坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> s</span><span class="pun">=</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&lt;</span><span class="pln">var2 </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> var2</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln">s</span><span class="pun">-</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从左往上测试</span></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上左一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">})</span></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">   </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"上左"</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="pln">                </span><span class="pun">--上右测试</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> var2</span><span class="pun">&lt;=</span><span class="lit">6</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上右坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pun">-</span><span class="pln">var2</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从右往上测试</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">~=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上右一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">})</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="kwd">var</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"上右"</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"><span class="pln">                </span><span class="pun">--下左测试</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&lt;=</span><span class="lit">6</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> var2</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">下左坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> s</span><span class="pun">=</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&gt;</span><span class="pln">var2 </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> var2</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="pln">s </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从左往下测试</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">==</span><span class="lit">9</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">下左一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">})</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2</span><span class="pun">-</span><span class="pln">t</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"下左"</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="pln">                </span><span class="pun">--下右测试</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&lt;=</span><span class="lit">6</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> var2</span><span class="pun">&lt;=</span><span class="lit">6</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上右坐标至少要</span><span class="lit">3</span><span class="pun">格</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> s</span><span class="pun">=</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">&gt;</span><span class="pln">var2 </span><span class="kwd">and</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> var2</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">翻转</span><span class="pln">s</span><span class="pun">={}</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">for</span><span class="pln"> t</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">从右往上测试</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">==</span><span class="lit">9</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln"> </span><span class="pun">上右一个棋子必须是反色</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                            table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(翻转</span><span class="pln">s</span><span class="pun">,{</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">})</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]==</span><span class="pln"> </span><span class="lit">3</span><span class="pln">  </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--没有棋子</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                                </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]=</span><span class="lit">3</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                                table</span><span class="pun">.</span><span class="pln">insert</span><span class="pun">(可落子区域,{</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pun">})</span><span class="pln"> </span><span class="pun">--这个位置可以落子</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">local</span><span class="pln"> keyName</span><span class="pun">=</span><span class="kwd">var</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2</span><span class="pun">+</span><span class="pln">t</span><span class="pun">+</span><span class="lit">1</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">"下右"</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                                </span><span class="pun">翻转区域[</span><span class="pln">keyName</span><span class="pun">]=翻转</span><span class="pln">s</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                                </span><span class="kwd">break</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">else</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                            </span><span class="kwd">break</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                        </span><span class="kwd">end</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="pln">text</span><span class="pun">,</span><span class="pln">size</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">    size </span><span class="pun">=</span><span class="pln"> size </span><span class="kwd">or</span><span class="pln"> </span><span class="lit">30</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    fwShowWnd</span><span class="pun">(</span><span class="str">"对局结束_UI"</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.3</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">1</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.2</span><span class="pun">,</span><span class="lit">1</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"对局结束_UI"</span><span class="pun">,</span><span class="str">"对局结束"</span><span class="pun">,</span><span class="pln">text</span><span class="pun">,</span><span class="str">"FFFFFF"</span><span class="pun">,</span><span class="str">"3399FF"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="pln">size</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">,</span><span class="pln">h</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">按钮组</span><span class="pln">_UI</span><span class="pun">()</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">提示按钮</span><span class="pln">_</span><span class="pun">颜色</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">下子提示==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="str">"666666"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">"FFCC33"</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">下子方=</span><span class="pln"> </span><span class="pun">下棋颜色==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="str">"黑方下棋"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="str">"白方下棋"</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">玩家</span><span class="pln">orAI </span><span class="pun">=</span><span class="pln"> </span><span class="pun">对手==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="pun">{</span><span class="str">"3399FF"</span><span class="pun">,</span><span class="str">"CC9999"</span><span class="pun">}</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">{</span><span class="str">"CC9999"</span><span class="pun">,</span><span class="str">"3399FF"</span><span class="pun">}</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"新开_ui"</span><span class="pun">,</span><span class="str">"重新开始"</span><span class="pun">,</span><span class="str">"000000"</span><span class="pun">,</span><span class="str">"666666"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="lit">12</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.08</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"退出_ui"</span><span class="pun">,</span><span class="str">"退出游戏"</span><span class="pun">,</span><span class="str">"000000"</span><span class="pun">,</span><span class="str">"666666"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="lit">12</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.08</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.16</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"提示_ui"</span><span class="pun">,</span><span class="str">"下子提示"</span><span class="pun">,</span><span class="str">"000000"</span><span class="pun">,提示按钮</span><span class="pln">_</span><span class="pun">颜色,</span><span class="str">""</span><span class="pun">,</span><span class="lit">12</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.16</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.24</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"版权_ui"</span><span class="pun">,</span><span class="str">"版权"</span><span class="pun">,</span><span class="str">"000000"</span><span class="pun">,</span><span class="str">"9999CC"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="lit">12</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.24</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.30</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"玩家_ui"</span><span class="pun">,</span><span class="str">"玩家"</span><span class="pun">,</span><span class="str">"FFFFFF"</span><span class="pun">,玩家</span><span class="pln">orAI</span><span class="pun">[</span><span class="lit">1</span><span class="pun">],</span><span class="str">""</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.3</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.4</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"AI_ui"</span><span class="pun">,</span><span class="str">"AI"</span><span class="pun">,</span><span class="str">"FFFFFF"</span><span class="pun">,玩家</span><span class="pln">orAI</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],</span><span class="str">""</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.4</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.5</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"下子方_ui"</span><span class="pun">,下子方,</span><span class="str">"66FF00"</span><span class="pun">,</span><span class="str">"FF3333"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.5</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.6</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"黑_ui"</span><span class="pun">,</span><span class="pln">tostring</span><span class="pun">(黑子数量),</span><span class="str">"FFFFFF"</span><span class="pun">,</span><span class="str">"000000"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.6</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.7</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"按钮组_UI"</span><span class="pun">,</span><span class="str">"白_ui"</span><span class="pun">,</span><span class="pln">tostring</span><span class="pun">(白子数量),</span><span class="str">"000000"</span><span class="pun">,</span><span class="str">"FFFFFF"</span><span class="pun">,</span><span class="str">""</span><span class="pun">,</span><span class="lit">14</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.7</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0</span><span class="pun">,</span><span class="pln">w</span><span class="pun">*</span><span class="lit">0.8</span><span class="pun">,</span><span class="pln">h</span><span class="pun">*</span><span class="lit">0.05</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">判断胜负()</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> over </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">nil</span><span class="pln">  </span><span class="pun">--</span><span class="lit">0</span><span class="pln"> </span><span class="pun">正在对战</span><span class="pln">   </span><span class="lit">1</span><span class="pln"> </span><span class="pun">黑子胜</span><span class="pln">   </span><span class="lit">2</span><span class="pln"> </span><span class="pun">白子胜</span><span class="pln">  </span><span class="lit">3</span><span class="pun">平局</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> var2</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--正在对战</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                over </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                </span><span class="kwd">break</span><span class="pln">    </span></code></li><li class="L5"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"></code></li><li class="L7"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="kwd">not</span><span class="pln"> over </span><span class="kwd">then</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">黑子数量&gt;白子数量</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">对手==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln">AI</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="str">"您获胜了！"</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">            elseif </span><span class="pun">对手==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="str">"黑子获胜了！"</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="pln">        elseif </span><span class="pun">黑子数量&lt;白子数量</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">对手==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">--</span><span class="pln">AI</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="str">"AI获胜了！"</span><span class="pun">)</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="pln">            elseif </span><span class="pun">对手==</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="str">"白子获胜了！"</span><span class="pun">)</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span><span class="pln">    </span></code></li><li class="L6"><code class="lang-lua"><span class="pln">        </span><span class="kwd">else</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">            </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="str">"平局"</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span><span class="pln">    </span></code></li><li class="L9"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> over</span></code></li><li class="L1"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">清空可落子区域()</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> k</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> pairs</span><span class="pun">(可落子区域)</span><span class="kwd">do</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]][</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span></code></li><li class="L8"><code class="lang-lua"><span class="pln">            </span><span class="pun">棋盘[</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]][</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]=</span><span class="lit">0</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">翻转棋子(</span><span class="pln">nameKey</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> lk</span><span class="pun">,</span><span class="pln">kv </span><span class="kwd">in</span><span class="pln"> pairs</span><span class="pun">(检测方向)</span><span class="kwd">do</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">翻转区域[</span><span class="pln">nameKey </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> kv</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> k</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> pairs</span><span class="pun">(翻转区域[</span><span class="pln">nameKey </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> kv</span><span class="pun">])</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="pun">棋盘[</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]][</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span><span class="pln">    </span></code></li><li class="L8"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">翻转视觉效果(</span><span class="pln">nameKey</span><span class="pun">,</span><span class="pln">v</span><span class="pun">)--★☆</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">下棋颜色==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">        </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=白棋</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">        </span><span class="pun">棋子=</span><span class="str">"☆"</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">    elseif </span><span class="pun">下棋颜色==</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">        </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=黑棋</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">        </span><span class="pun">棋子=</span><span class="str">"☆"</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">    fwShowButton</span><span class="pun">(</span><span class="str">"wid"</span><span class="pun">,</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],棋子,棋子</span><span class="pln">_</span><span class="pun">颜色,棋盘底色,</span><span class="str">""</span><span class="pun">,棋子大小,棋盘格子大小*(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]-</span><span class="lit">1</span><span class="pun">),棋盘格子大小*(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]-</span><span class="lit">1</span><span class="pun">),棋盘格子大小*</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]-棋盘格子间距,棋盘格子大小*</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]-棋盘格子间距)</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> lk</span><span class="pun">,</span><span class="pln">kv </span><span class="kwd">in</span><span class="pln"> pairs</span><span class="pun">(检测方向)</span><span class="kwd">do</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">翻转区域[</span><span class="pln">nameKey </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> kv</span><span class="pun">]</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">            </span><span class="kwd">for</span><span class="pln"> k</span><span class="pun">,</span><span class="pln">v </span><span class="kwd">in</span><span class="pln"> pairs</span><span class="pun">(翻转区域[</span><span class="pln">nameKey </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> kv</span><span class="pun">])</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]][</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">~=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]][</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=白棋</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子=</span><span class="str">"☆"</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    elseif </span><span class="pun">棋盘[</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]][</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=黑棋</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子=</span><span class="str">"☆"</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span><span class="pln">    </span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                    fwShowButton</span><span class="pun">(</span><span class="str">"wid"</span><span class="pun">,</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">],棋子,棋子</span><span class="pln">_</span><span class="pun">颜色,棋盘底色,</span><span class="str">""</span><span class="pun">,棋子大小,棋盘格子大小*(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]-</span><span class="lit">1</span><span class="pun">),棋盘格子大小*(</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]-</span><span class="lit">1</span><span class="pun">),棋盘格子大小*</span><span class="pln">v</span><span class="pun">[</span><span class="lit">2</span><span class="pun">]-棋盘格子间距,棋盘格子大小*</span><span class="pln">v</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]-棋盘格子间距)</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">渲染棋盘(</span><span class="pln">key</span><span class="pun">)</span></code></li><li class="L6"><code class="lang-lua"></code></li><li class="L7"><code class="lang-lua"><span class="pln">    </span><span class="pun">清空可落子区域()</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> key </span><span class="kwd">then</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="pun">翻转棋子(</span><span class="pln">key</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"><span class="pln">    </span><span class="pun">测试可落子区域()</span></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> var2</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">~=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                    </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=黑棋</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                    </span><span class="pun">棋子=</span><span class="str">"●"</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                elseif </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=白棋</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                    </span><span class="pun">棋子=</span><span class="str">"●"</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                elseif </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">下棋颜色</span><span class="pln"> </span><span class="pun">==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=黑棋</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    elseif </span><span class="pun">下棋颜色</span><span class="pln"> </span><span class="pun">==</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=白棋</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">下子提示==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子=</span><span class="str">"○"</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">else</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子=</span><span class="str">""</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">对手==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="pun">下棋颜色==</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">then</span><span class="pln"> </span><span class="pun">---</span><span class="pln">AI</span><span class="pun">下棋不显示</span><span class="pln"> </span><span class="pun">下子提示</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                        </span><span class="pun">棋子=</span><span class="str">""</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span><span class="pln">    </span></code></li><li class="L8"><code class="lang-lua"><span class="pln">            </span><span class="kwd">else</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                </span><span class="pun">棋子</span><span class="pln">_</span><span class="pun">颜色=</span><span class="str">""</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                </span><span class="pun">棋子=</span><span class="str">""</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">            fwShowButton</span><span class="pun">(</span><span class="str">"wid"</span><span class="pun">,</span><span class="kwd">var</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2</span><span class="pun">,棋子,棋子</span><span class="pln">_</span><span class="pun">颜色,棋盘底色,</span><span class="str">""</span><span class="pun">,棋子大小,棋盘格子大小*(</span><span class="pln">var2</span><span class="pun">-</span><span class="lit">1</span><span class="pun">),棋盘格子大小*(</span><span class="kwd">var</span><span class="pun">-</span><span class="lit">1</span><span class="pun">),棋盘格子大小*</span><span class="pln">var2</span><span class="pun">-棋盘格子间距,棋盘格子大小*</span><span class="kwd">var</span><span class="pun">-棋盘格子间距)</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">    </span><span class="pun">按钮组</span><span class="pln">_UI</span><span class="pun">()</span></code></li><li class="L6"><code class="lang-lua"></code></li><li class="L7"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> AI</span><span class="pun">下子()</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln"> __</span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">nil</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">下棋颜色==</span><span class="lit">2</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="pun">对手==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> </span><span class="com">#可落子区域~= 0 then</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">            </span><span class="kwd">local</span><span class="pln"> random</span><span class="pun">=</span><span class="pln">math</span><span class="pun">.</span><span class="pln">random</span><span class="pun">(#可落子区域)</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">            </span><span class="kwd">local</span><span class="pln"> </span><span class="pun">下子位置=可落子区域[</span><span class="pln">random</span><span class="pun">]</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">            __</span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">下子位置[</span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="pun">下子位置[</span><span class="lit">2</span><span class="pun">]</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    mSleep</span><span class="pun">(</span><span class="lit">600</span><span class="pun">)</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> __</span><span class="pun">棋盘格子</span></code></li><li class="L8"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="kwd">function</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln">_</span><span class="pun">点击事件()</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">    </span><span class="kwd">local</span><span class="pln">  </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> AI</span><span class="pun">下子()</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> fwGetPressedButton</span><span class="pun">()</span></code></li><li class="L5"><code class="lang-lua"></code></li><li class="L6"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"对局结束"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">        fwCloseWnd</span><span class="pun">(</span><span class="str">"对局结束_UI"</span><span class="pun">)</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"提示_ui"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">        </span><span class="pun">下子提示=</span><span class="lit">1</span><span class="pun">-下子提示</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">        </span><span class="pun">渲染棋盘()</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"新开_ui"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">        </span><span class="pun">游戏初始化()</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"退出_ui"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">        </span><span class="pun">结束游戏=</span><span class="lit">1</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"玩家_ui"</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"AI_ui"</span><span class="pln">  </span><span class="kwd">then</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">        </span><span class="pun">对手=</span><span class="lit">1</span><span class="pun">-对手</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">        </span><span class="pun">按钮组</span><span class="pln">_UI</span><span class="pun">()</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"版权_ui"</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="pun">对局结束</span><span class="pln">_UI</span><span class="pun">(</span><span class="str">"版权归 黑猫 所有！\nQQ: 2920007919\\3139302743"</span><span class="pun">,</span><span class="lit">20</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="kwd">var</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> var2</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="lit">8</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘格子==</span><span class="pln"> </span><span class="kwd">var</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> </span><span class="str">":"</span><span class="pln"> </span><span class="pun">..</span><span class="pln"> var2 </span><span class="kwd">then</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]==</span><span class="lit">3</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">                    </span><span class="pun">棋盘[</span><span class="kwd">var</span><span class="pun">][</span><span class="pln">var2</span><span class="pun">]=下棋颜色</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">                    </span><span class="pun">下棋颜色</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">3</span><span class="pun">-下棋颜色</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">                    </span><span class="pun">翻转视觉效果(棋盘格子,{</span><span class="kwd">var</span><span class="pun">,</span><span class="pln">var2</span><span class="pun">})</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">                    mSleep</span><span class="pun">(</span><span class="lit">600</span><span class="pun">)</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">                    </span><span class="pun">渲染棋盘(棋盘格子)</span></code></li><li class="L1"><code class="lang-lua"><span class="pln">                    </span><span class="pun">判断胜负()</span></code></li><li class="L2"><code class="lang-lua"><span class="pln">                </span><span class="kwd">else</span></code></li><li class="L3"><code class="lang-lua"><span class="pln">                    toast</span><span class="pun">(</span><span class="str">"此位置不可落子！"</span><span class="pun">)</span></code></li><li class="L4"><code class="lang-lua"><span class="pln">                </span><span class="kwd">end</span></code></li><li class="L5"><code class="lang-lua"><span class="pln">            </span><span class="kwd">end</span></code></li><li class="L6"><code class="lang-lua"><span class="pln">        </span><span class="kwd">end</span></code></li><li class="L7"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L8"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L9"><code class="lang-lua"></code></li><li class="L0"><code class="lang-lua"></code></li><li class="L1"><code class="lang-lua"></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"><span class="pun">游戏初始化()</span></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">true</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">do</span></code></li><li class="L6"><code class="lang-lua"></code></li><li class="L7"><code class="lang-lua"><span class="pln">    </span><span class="pun">棋盘格子</span><span class="pln">_</span><span class="pun">点击事件()</span></code></li><li class="L8"><code class="lang-lua"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">结束游戏==</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">then</span></code></li><li class="L9"><code class="lang-lua"><span class="pln">        </span><span class="kwd">break</span></code></li><li class="L0"><code class="lang-lua"><span class="pln">    </span><span class="kwd">end</span></code></li><li class="L1"><code class="lang-lua"><span class="kwd">end</span></code></li><li class="L2"><code class="lang-lua"></code></li><li class="L3"><code class="lang-lua"></code></li><li class="L4"><code class="lang-lua"></code></li><li class="L5"><code class="lang-lua"></code></li><li class="L6"><code class="lang-lua"></code></li><li class="L7"><code class="lang-lua"></code></li><li class="L8"><code class="lang-lua"></code></li><li class="L9"><code class="lang-lua"><span class="pun">--</span><span class="pln">fwCloseWnd</span><span class="pun">(</span><span class="str">"wid"</span><span class="pun">)</span></code></li></ol></pre>
</div>
<button onclick="copyText()">Copy Text</button>
<script>
function copyText(){
  alert("你点击了按钮")
}
</script>
